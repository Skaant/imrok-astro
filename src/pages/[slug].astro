---
import { render } from "astro:content";
import { getCollection } from "astro:content";
import Layout from "nebula-atoms-astro/Layout";
import Navbar from "../components/Navbar.astro";

export async function getStaticPaths() {
  const pages = await getCollection("pages");
  return pages
    .filter(({ data }) => data.Url.slice(1))
    .map((page) => ({
      params: {
        slug: page.data.Url.slice(1),
      },
      props: {
        page: {
          ...page,
          rendered: page.rendered,
        },
      },
    }));
}

const { page } = Astro.props;
const { Content } = await render(page);
---

<Layout title={page.data.Name}>
  <Navbar slot="navbar" />
  <Content />
</Layout>
